#machine-config_version=5

fast:
  ports: /dev/ttyUSB1, /dev/ttyUSB2
  baud: 921600

hardware:
  platform: fast
  driverboards: fast

playfields:
  playfield:
    default_source_device: bd_drain
    tags: default

switches:
  debug: True:we'll
# Switch List (<board>-<switch-no>)
# 0-0	left "3" target
# 0-1	left "2" target
# 0-2	left "1" target
# 0-3	right "1" target
# 0-4	right "2" target 
# 0-5	right "3" target
# 0-6	triple lanes
# 0-7	center pop-bumper
# 0-8	drain
# 0-9	home run lanes
# 0-10	single lanes
# 0-11	first base rollover
# 0-12	second base rollover
# 0-13	third base rollover
# 0-14	home base rollover
# 0-15	double lanes
# 0-16	right varitarget "in-play"
# 0-17	left varitarget "in-play"
# 0-18	right slingshot
# 0-19	left slingshot
# 0-20	lower "1" target
# 0-21	lower "3" target
# 0-22	right pop-bumper
# 0-23	left pop-bumper
# 0-24	right varitarget "100"
# 0-25	right varitarget "200"
# 0-26	right varitarget "300"
# 0-27	right varitarget "500"
# 0-28	left varitarget "100"
# 0-29	left varitarget "200"
# 0-30	left varitarget "300"
# 0-31	left varitarget "500"
# 1-0	all bumper switches
# 1-5	game start
# 1-6	left flipper
# 1-7	right flipper

  s_drain:
    number: 0-8
    tags: drain
  s_home_run_lanes:
    number: 0-9
    tags: playfield_active
  s_single_lanes:
    number: 0-10
    tags: playfield_active
  s_first_base:
    number: 0-11
    tags: playfield_active
  s_second_base:
    number: 0-12
    tags: playfield_active
  s_third_base:
    number: 0-13
    tags: playfield_active
  s_home_base:
    number: 0-14
    tags: playfield_active
  s_double_lanes:
    number: 0-15
    tags: playfield_active
  s_right_vt_inplay:
    number: 0-16
    tags: playfield_active, rvt_inplay
    events_when_activated: collect_varitarget
  s_right_vt_100:
    number: 0-24
    tags: playfield_active
  s_right_vt_200:
    number: 0-25
    tags: playfield_active
  s_right_vt_300:
    number: 0-26
    tags: playfield_active
  s_right_vt_500:
    number: 0-27
    tags: playfield_active
  s_right_slingshot:
    number: 0-18
  s_left_slingshot:
    number: 0-19
  s_left_vt_inplay:
    number: 0-17
    tags: playfield_active, lvt_inplay
    events_when_activated: collect_varitarget
  s_left_vt_100:
    number: 0-28
    tags: playfield_active
  s_left_vt_200:
    number: 0-29
    tags: playfield_active
  s_left_vt_300:
    number: 0-30
    tags: playfield_active
  s_left_vt_500:
    number: 0-31
    tags: playfield_active
  s_right_pop_bumper:
    number: 0-22
  s_left_pop_bumper:
    number: 0-23
  s_center_pop_bumper:
    number: 0-7
  s_lower_target_1:
    number: 0-20
    tags: playfield_active
  s_lower_target_3:
    number: 0-21
    tags: playfield_active
  s_left_target_3:
    number: 0-0
    tags: playfield_active
  s_left_target_2:
    number: 0-1
    tags: playfield_active
  s_left_target_1:
    number: 0-2
    tags: playfield_active
  s_right_target_1:
    number: 0-3
    tags: playfield_active
  s_right_target_2:
    number: 0-4
    tags: playfield_active
  s_right_target_3:
    number: 0-5
    tags: playfield_active
  s_bumpers:
    number: 1-0
    tags: playfield_active
  s_triple_lanes:
    number: 0-6
    tags: playfield_active
  s_start:
    number: 1-5
    tags: start
  s_left_flipper:
    number: 1-6
    tags: left_flipper, playfield_active
  s_right_flipper:
    number: 1-7
    tags: right_flipper, playfield_active
  
coils:
 # 0-0: Left Slingshot
 # 0-1: Right Slingshot
 # 0-2: Drain eject
 # 0-3: Right Pop Bumper
 # 0-4: Left Vari-Target Release
 # 0-5: Left Pop Bumper
 # 0-6: Center Pop Bumper
 # 0-7: Right Vari-Target Release
 # 1-0: Right Flipper Main
 # 1-1: Right Flipper Hold
 # 1-2: Left Flipper Main
 # 1-3: Left Flipper Hold
 # Hex: Coil:
 # 0B   Left Flipper hold
 # 0A   Left Flipper main
 # 09   Right Flipper hold
 # 08   Right Flipper main
 # 07   Center Pop Bumper
 # 06   Left Pop Bumper
 # 05   Right Varitarget Release
 # 04   Left Varitarget Release
 # 03   Right Pop Bumper
 # 02   Drain Kicker
 # 01   Right Slingshot
 # 00   Left Slingshot
  c_drain_eject:
    number: 0-2
    max_pulse_ms: 20
    allow_enable: true
  c_flipper_left_main:
    number: 1-2
    allow_enable: true
  c_flipper_left_hold:
    number: 1-3
    allow_enable: true
  c_flipper_right_main:
    number: 1-0
    allow_enable: true
  c_flipper_right_hold:
    number: 1-1
    allow_enable: true
  c_left_slingshot:
    number: 0-0
    allow_enable: true
  c_right_slingshot:
    number: 0-1
    allow_enable: true
  c_left_pop_bumper:
    number: 0-6
    allow_enable: true
  c_right_pop_bumper:
    number: 0-3
    allow_enable: true
  c_center_pop_bumper:
    number: 0-7
    allow_enable: true

lights:
  l_right_target_3:
    number: 0-0
  l_right_target_2:
    number: 0-1
  l_right_target_1:
    number: 0-2
  l_left_target_1:
    number: 0-3
  l_left_target_2:
    number: 0-4
  l_left_target_3:
    number: 0-5
  l_shoot_ball:
    number: 0-6
    
ball_devices:
  bd_drain:
    ball_switches: s_drain
    eject_coil: c_drain_eject
    eject_targets: playfield
    tags: drain, home, trough

autofire_coils:
  left_slingshot:
    coil: c_left_slingshot
    switch: s_left_slingshot
  right_slightshot:
    coil: c_right_slingshot
    switch: s_right_slingshot
  left_pop_bumper:
    coil: c_left_pop_bumper
    switch: s_left_pop_bumper
  right_pop_bumper:
    coil: c_right_pop_bumper
    switch: s_right_pop_bumper
  center_pop_bumper:
    coil: c_center_pop_bumper
    switch: s_center_pop_bumper

modes:
  - base

# slides:
#   window_slide_1:  # slide we'll show in the on-screen window
#   - type: display    # this widget shows the DMD content in this slide too
#     effects:
#      - type: color_dmd
#     width: 512
#     height: 128
#   - type: text
#     text: MISSION PINBALL FRAMEWORK
#     anchor_y: top
#     y: top-3
#     font_size: 30
#     color: white
#   - type: rectangle
#     width: 514
#     height: 130
#     color: 444444
#   dmd_slide_1:  # slide we'll show on the physical DMD
#   - type: text
#     text: IT WORKS!
#     font_size: 30
#     color: red
        
# slide_player:
#  init_done: 
#    window_slide_1:
#      target: window
#    dmd_slide_1:
#      target: dmd

flippers:
  left_flipper:
    main_coil: c_flipper_left_main
    hold_coil: c_flipper_left_hold
    activation_switch: s_left_flipper
  right_flipper:
    main_coil: c_flipper_right_main
    hold_coil: c_flipper_right_hold
    activation_switch: s_right_flipper

virtual_platform_start_active_switches:
  #s_drain
